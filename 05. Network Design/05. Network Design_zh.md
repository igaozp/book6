# 网络设计

首先有一个非常通用的说明，由于 IPv6 是一种数据报协议，其路由依赖于地址前缀的最长匹配，因此最高层次的设计决策与 IPv4 相同。

有一个约束不适用于 IPv6：每个子网的主机数量实际上没有理论限制。（从数学上讲，一个 /64 子网上的节点数量限制约为 18×10^18，但这在实际应用中不是问题。）然而，出于性能原因，大多数网络设计师永远不会在单个子网上放置数百或数千台主机。

不过，网络设计师在使用 IPv6 时确实拥有更大的灵活性。如果一个企业拥有一个 /48 前缀，则有 16 位可用于标识超过 65,000 个独立的子网，这对于大多数 IPv4 网络设计师来说是一种奢侈。但我们可以走得更远：在某些部署模型中，向单个节点分配一个完整的 /64 前缀可能是有益的（例如，如果该节点可能包含大量虚拟机）。大型企业，当然还有运营商，如果需要，可以简单地获得更多的地址空间（即短于 /48 的前缀）。在实践中，地址空间应该_永远不_成为 IPv6 网络设计的限制因素。

抛开这些方面，IPv6 网络没有理由采用与 IPv4 网络不同的宏观设计。详细方法会有所不同。

- 如果意图是"改造"，即在现有的 IPv4 网络上添加 IPv6 支持，主要拓扑结构不会改变，但边界路由器、防火墙、内部路由器和 DMZ 等项目需要相应升级。显然，必须做出 IPv6/IPv4 共存机制的特定选择，并一致地应用。过去，大多数网络选择了原始的双栈方法
  \[[3. 双栈场景](../03.%20Coexistence%20with%20Legacy%20IPv4/Dual%20stack%20scenarios.md)\]
  但设计师现在也应该考虑
  [3. 转换和 IPv4 即服务](../03.%20Coexistence%20with%20Legacy%20IPv4/Translation%20and%20IPv4%20as%20a%20service.md)。
  优先事项将是在向用户部署之前，为 NOC 及其所有系统添加全面的 IPv6 支持。同等优先的事项将是培训所有 NOC 和支持人员：他们需要成为 IPv6 的倡导者。

- 如果意图是"绿地"部署，没有现有的 IPv4 网络，主要拓扑结构将是传统的，但必须为 IPv4 即服务做出机制的特定选择
  \[[3. 转换和 IPv4 即服务](../03.%20Coexistence%20with%20Legacy%20IPv4/Translation%20and%20IPv4%20as%20a%20service.md)\]。
  NOC 必须从一开始就基于 IPv6 设计，并具有管理 IPv4 即服务的能力。

- 改造设计和绿地设计之间的一个具体差异是，现有的 IPv4 网络几乎不可避免地具有限制为 256 个或更少主机的子网，通常少至 64 个。由于 IPv6 中的正常子网前缀是 /64，因此在 IPv6 的绿地部署中没有这种限制。然而，出于诸如链路本地多播速率等实际原因，应避免非常大的子网。如其他地方所述
  \[[2. 地址解析](../02.%20IPv6%20Basic%20Technology/Address%20resolution.md)\]
  这尤其适用于无线网络。

本章继续讨论地址规划，不可避免地与子网设计相结合。

## [地址规划](Address%20Planning.md)

<!-- ## Name (add plain section names like that) -->

<!-- Link lines generated automatically; do not delete -->

## [每主机前缀](Prefix%20per%20Host.md)

### [<ins>返回主目录</ins>](../Contents.md)
